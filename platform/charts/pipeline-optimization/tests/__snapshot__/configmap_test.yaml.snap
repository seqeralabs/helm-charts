should evaluate multiple template expressions in database config:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://RELEASE-NAME-host:3306/pipeline-optimization-database
      SWELL_DB_USER: RELEASE-NAME-user
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "8090"
      TOWER_DB_URL: jdbc:mysql://:3306/
      TOWER_DB_USER: ""
    kind: ConfigMap
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        helm.sh/chart: pipeline-optimization-1.2.3
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should evaluate multiple template expressions in platformDatabase config:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://:3306/
      SWELL_DB_USER: ""
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "8090"
      TOWER_DB_URL: jdbc:mysql://RELEASE-NAME-platform-host:3306/pipeline-optimization-platform-database
      TOWER_DB_USER: RELEASE-NAME-platform-user
    kind: ConfigMap
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        helm.sh/chart: pipeline-optimization-1.2.3
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should evaluate template expressions in configMapAnnotations:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://:3306/
      SWELL_DB_USER: ""
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "8090"
      TOWER_DB_URL: jdbc:mysql://:3306/
      TOWER_DB_USER: ""
    kind: ConfigMap
    metadata:
      annotations:
        app-version: v9.9.9
        release-name: RELEASE-NAME
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        helm.sh/chart: pipeline-optimization-1.2.3
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should evaluate template expressions in configMapLabels:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://:3306/
      SWELL_DB_USER: ""
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "8090"
      TOWER_DB_URL: jdbc:mysql://:3306/
      TOWER_DB_USER: ""
    kind: ConfigMap
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        chart: pipeline-optimization
        helm.sh/chart: pipeline-optimization-1.2.3
        release: RELEASE-NAME
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should evaluate template expressions in database.host:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://RELEASE-NAME-mysql:3306/mydb
      SWELL_DB_USER: user
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "8090"
      TOWER_DB_URL: jdbc:mysql://:3306/
      TOWER_DB_USER: ""
    kind: ConfigMap
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        helm.sh/chart: pipeline-optimization-1.2.3
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should evaluate template expressions in database.name:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://testhost:3306/pipeline-optimization-db
      SWELL_DB_USER: user
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "8090"
      TOWER_DB_URL: jdbc:mysql://:3306/
      TOWER_DB_USER: ""
    kind: ConfigMap
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        helm.sh/chart: pipeline-optimization-1.2.3
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should evaluate template expressions in database.port:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://testhost:3307/mydb
      SWELL_DB_USER: user
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "3307"
      TOWER_DB_URL: jdbc:mysql://:3306/
      TOWER_DB_USER: ""
    kind: ConfigMap
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        helm.sh/chart: pipeline-optimization-1.2.3
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should evaluate template expressions in database.username:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://testhost:3306/
      SWELL_DB_USER: RELEASE-NAME-user
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "8090"
      TOWER_DB_URL: jdbc:mysql://:3306/
      TOWER_DB_USER: ""
    kind: ConfigMap
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        helm.sh/chart: pipeline-optimization-1.2.3
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should evaluate template expressions in platformDatabase.host:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://:3306/
      SWELL_DB_USER: ""
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "8090"
      TOWER_DB_URL: jdbc:mysql://RELEASE-NAME-platform-mysql:3306/platformdb
      TOWER_DB_USER: platformuser
    kind: ConfigMap
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        helm.sh/chart: pipeline-optimization-1.2.3
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should evaluate template expressions in platformDatabase.name:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://:3306/
      SWELL_DB_USER: ""
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "8090"
      TOWER_DB_URL: jdbc:mysql://platformhost:3306/pipeline-optimization-platform-db
      TOWER_DB_USER: platformuser
    kind: ConfigMap
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        helm.sh/chart: pipeline-optimization-1.2.3
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should evaluate template expressions in platformDatabase.port:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://:3306/
      SWELL_DB_USER: ""
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "8090"
      TOWER_DB_URL: jdbc:mysql://platformhost:3308/platformdb
      TOWER_DB_USER: platformuser
    kind: ConfigMap
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        helm.sh/chart: pipeline-optimization-1.2.3
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should evaluate template expressions in platformDatabase.username:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://:3306/
      SWELL_DB_USER: ""
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "8090"
      TOWER_DB_URL: jdbc:mysql://testhost:3306/
      TOWER_DB_USER: pipeline-optimization-user
    kind: ConfigMap
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        helm.sh/chart: pipeline-optimization-1.2.3
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should evaluate template expressions in service.http.targetPort:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://:3306/
      SWELL_DB_USER: ""
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "8090"
      TOWER_DB_URL: jdbc:mysql://:3306/
      TOWER_DB_USER: ""
    kind: ConfigMap
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        helm.sh/chart: pipeline-optimization-1.2.3
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should merge commonAnnotations and configMapAnnotations:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://:3306/
      SWELL_DB_USER: ""
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "8090"
      TOWER_DB_URL: jdbc:mysql://:3306/
      TOWER_DB_USER: ""
    kind: ConfigMap
    metadata:
      annotations:
        configmap.example.com/annotation: configmap-specific
        example.com/annotation: common-value
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        helm.sh/chart: pipeline-optimization-1.2.3
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should merge commonLabels and configMapLabels:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://:3306/
      SWELL_DB_USER: ""
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "8090"
      TOWER_DB_URL: jdbc:mysql://:3306/
      TOWER_DB_USER: ""
    kind: ConfigMap
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/component: configmap
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        custom-label: custom-value
        environment: production
        helm.sh/chart: pipeline-optimization-1.2.3
        team: platform
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should render cm with default values:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://:3306/
      SWELL_DB_USER: ""
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "8090"
      TOWER_DB_URL: jdbc:mysql://:3306/
      TOWER_DB_USER: ""
    kind: ConfigMap
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        helm.sh/chart: pipeline-optimization-1.2.3
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should render complete configuration with all values set:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://swelldb.example.com:3307/swelldb
      SWELL_DB_USER: swelluser
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "9090"
      TOWER_DB_URL: jdbc:mysql://platformdb.example.com:3308/platformdb
      TOWER_DB_USER: platformuser
    kind: ConfigMap
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        helm.sh/chart: pipeline-optimization-1.2.3
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should setup platform db values in addition to the mandatory ones:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://:3306/
      SWELL_DB_USER: ""
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "8090"
      TOWER_DB_URL: jdbc:mysql://platformhost:2345/name
      TOWER_DB_USER: asdf
    kind: ConfigMap
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        helm.sh/chart: pipeline-optimization-1.2.3
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
should setup swell db values in addition to the mandatory ones:
  1: |
    apiVersion: v1
    data:
      SWELL_DB_DIALECT: mysql
      SWELL_DB_URL: mysql://swellhost:3456/name
      SWELL_DB_USER: asdf
      SWELL_SERVER_HOST: 0.0.0.0
      SWELL_SERVER_PORT: "8090"
      TOWER_DB_URL: jdbc:mysql://:3306/
      TOWER_DB_USER: ""
    kind: ConfigMap
    metadata:
      annotations: {}
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pipeline-optimization
        app.kubernetes.io/version: v9.9.9
        helm.sh/chart: pipeline-optimization-1.2.3
      name: release-name-pipeline-optimization
      namespace: NAMESPACE
